{% extends "base.html" %}
{% load l10n %}

{% block content %}

<!--<div id="order-detail-filter-form" style="display: none">-->
<!--        <form action="" method="get">-->
<!--            <div id="order-detail-filter-form-code">-->
<!--                <label for="id_code">Код:</label>-->
<!--                <input type="number" name="code" step="any" id="id_code">-->
<!--            </div>-->
<!--            <div id="order-detail-filter-form-bar-code">-->
<!--                <label for="id_bar_code">Штрихкод:</label>-->
<!--                <input type="number" name="bar_code" step="any" id="id_bar_code">-->
<!--            </div>-->
<!--            <div id="order-detail-filter-form-quantity">-->
<!--                <label for="id_quantity">Заказ:</label>-->
<!--                <input type="number" name="quantity" step="any" id="id_quantity">-->
<!--            </div>-->
<!--            <div id="order-detail-filter-form-name">-->
<!--                <label for="id_name">Продукция:</label>-->
<!--                <input type="text" name="name" id="id_name">-->
<!--            </div>-->
<!--            <input type="submit" value="Применить" id="order-detail-filter-form-submit-btn"/>-->
<!--        </form>-->
<!--</div>-->

<div id="order-detail-table">
    <div id="order-detail-table-header">
        <div class="order-detail-table-items">
            <span class="order-detail-table-items-1"><b>Маркет: </b></span>
            <span class="order-detail-table-items-2">{{object.buyer}}</span>
        </div>
        <div class="order-detail-table-items">
            <span class="order-detail-table-items-1"><b>Дата: </b></span>
            <span class="order-detail-table-items-2">{{object.date}}</span>
        </div>

        <div class="order-detail-table-items">
            <span class="order-detail-table-items-1"><b>Сумма: </b></span>
            <span class="order-detail-table-items-2">{{totall_price_2}} c.</span>
        </div>

         <div class="order-detail-table-items">
            <span class="order-detail-table-items-1"><b>Кол-во элементов: </b></span>
            <span class="order-detail-table-items-2">{{filterset.qs | length}} шт.</span>
        </div>

        <div class="order-detail-table-items">
            <span class="order-detail-table-items-1"><b>Кол-во продукции: </b></span>
            <span class="order-detail-table-items-2">{{totall_dishes}} шт.</span>
        </div>
<!--        <div id="order-detail-table-buyer-name">-->
<!--            <h3>{{object.buyer}}</h3>-->
<!--        </div>-->
<!--        <div id="order-detail-table-filter-btn" onclick="toggleFilter()">-->
<!--            <span>Фильтры</span>-->
<!--        </div>-->
    </div>

    <div id="order-detail-table-buyer-name-divisor"></div>

    <div id="order-detail-table-dish-header">
        <div id="order-detail-table-dish-header-number">
            <span>№</span>
        </div>
<!--        <div id="order-detail-table-dish-header-code">-->
<!--            <span>Код</span>-->
<!--        </div>-->
        <div id="order-detail-table-dish-header-bar-code">
            <span>Штрихкод</span>
        </div>
        <div id="order-detail-table-dish-header-name">
            <span>Продукция</span>
        </div>
        <div id="order-detail-table-dish-header-quantity">
            <span>Заказ</span>
        </div>
        <div id="order-detail-table-dish-header-price_2">
            <span>Цена (продажная)</span>
        </div>
    </div>

    <div id="order-detail-table-dish-header-divisor"></div>

    {% for dish in  filterset.qs %}

    <a href="/dish/{{dish.pk}}">
        <div class="order-detail-table-dish">
        <div class="order-detail-table-dish-number">
            <span>{{dish.number}}</span>
        </div>
        <div class="order-detail-table-dish-bar-code">
            <span>{{dish.bar_code}}</span>
        </div>
        <div class="order-detail-table-dish-name">
            <span>{{dish.name}}</span>
        </div>
        <div class="order-detail-table-dish-quantity">
            <span>{{dish.quantity}}</span>
        </div>
        <div class="order-detail-table-dish-price_2">
            <span>{{dish.price_2}} c.</span>
        </div>
    </div>
    </a>



    <div class="order-detail-table-dish-divisor"></div>
    {% endfor %}
</div>

<script>
    function toggleFilter() {
        let filterBlockDisplay =  document.getElementById("order-detail-filter-form").style.display
        if (filterBlockDisplay == 'none') {
            document.getElementById("order-detail-filter-form").style.display = 'block';
        } else {
            document.getElementById("order-detail-filter-form").style.display = 'none';
        }
    }
</script>

{% endblock content %}